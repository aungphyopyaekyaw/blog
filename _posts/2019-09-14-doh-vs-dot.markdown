---
layout: post
title:  "DoH vs DoT"
date:   2019-09-14 00:19:09 +0630
categories: DNS
image:
    path: /assets/img/2019-sep/dns_doh.jpg
---

![doh vs dot](/assets/img/2019-sep/dns_doh.jpg){:class="img-responsive"}

Vs ဆိုတာမစခင်မှာ သူတို့က ဘာကြီးတွေလဲဆိုတာရေးရမှာပေါ့။ Internet ဆိုတာကြီးမှာ DNS ခေါ် domain name system ဆိုတာလိုတယ်ဗျ ဥပမာ www.google.com ဆိုတာမျိုးပေါ့။ တကယ်က www.google.com ဆိုတာကို ခေါ်လိုက်တဲ့အခါ သူနဲ့သက်ဆိုင်တဲ့ IP ကျလာတယ် web server IP ပေါ့။ ထားပါတော့ အဲ့ဒါတွေမရေးတော့ဘူး ကြာလို့.. အဲ့ DNS ကို ခေါ်လိုက်ရင် ကျွန်တော်တို့ရဲ့ query တွေက ISP မှာတွေရတယ်ဗျာ အလွယ်ပြောရရင် ကိုယ်ဘယ် website တွေကို ကြည့်တယ် ဘယ် apps တွေသုံးတယ် စဖြင့် ISP နဲ့ ကြားက traffic အကုန်လုံးမှာ အဲ့ information တွေက plain text အနေနဲ့ တွေရတာပေါ့။ ISP မှ မဟုတ်ဘူး ကိုယ့် traffic ကို tap ပြီး ကြည့်လို့ရတဲ့သူအားလုံး ကိုယ်ဘယ် website အကြည့်များတယ် ဘယ် application အသုံးများတယ် ဆိုတာသိနိုင်တယ်ပေါ့။ အဲ့လိုအကြည့်ခံရတာ မကြိုက်တော့ အခု DoH တို့ DoT တို့ ဆိုတာတွေပေါ်လာတယ်။ သဘောကဗျာ အဲ့ဒီ plain text နဲ့သွားတဲ့ DNS ကို https ပေါ်တင်လိုက်တော့ dns over https, TLS နဲ့သွားတော့ DNS over TLS ဆိုပြီးဖြစ်လာတယ်။ အဲ့နှစ်ခုလုံးက encrypt လုပ်ပြီးသားဆိုတော့ ကြားကနေ ဘယ်သူမှ ကိုယ်ဘယ် website ကို ကြည့်တယ် ဘာသုံးတယ်ဆိုတာ မတွေ့ရတော့ဘူး။ ဒီမှာ ဘာကွာလဲ စရမယ်.. DoH ဆိုတာ https ကိုသုံးပြီး port 443 ကနေသွားတယ် သူကမသိရင် web request အတိုင်းပဲ တကယ်က DNS query. DoT ကြတော့ port 853 နဲ့သွားတယ် သူက dedicated port သူ့အတွက် သီးသန့်ပေါ့ဗျာ။ သီးသန့် port ရှိလို့ ကောင်းတယ်ထင်ရပေမဲ့ တကယ်က မဟုတ်ဘူး။ ကြားကကြည့်တဲ့လူက 853 နဲ့လာတယ်ဆို DoT သုံးမှန်း တန်းသိနိုင်ပြီး ISP ဆိုရင် block လို့တောင်ရတယ်။ 443 ဆိုရင်တော့ ဘယ်သူ့မှ မပိတ်သလို ဘယ်သူ့မှလည်း DNS query မှန်းမသိနိုင်ဘူး.. အဲ့ဒါသူ့အားသာချက်ပေါ့ဗျာ။ ဘာပဲပြောပြောကြိုက်တာသုံး plain text ထပ်တော့ privacy မှာ သာတယ်။ ဘယ်လိုသုံးရမလဲဆိုရင်တော့ [stubby][stubby-git]{:target="_blank" rel="noopener"} နဲ့သုံးလို့ရတယ်။ firefox ကလည်း DoH ကို support လုပ်တယ်။ Support လုပ်တဲ့ recursive resolver တွေကတော့ အများကြီးပဲ cloudflare (1.1.1.1), google (8.8.8.8), quad9 (9.9.9.9) အစုံပဲ အများကြီး.. ကိုယ်ယုံတဲ့ဟာကိုသာသုံး.. ကိုယ့် DNS query တွေကို ကြားကသူကလွဲရင် အဲ့ဒီ recursive resolver တွေကတော့ ကြည့်နိုင်တယ်။ ကျွန်တော်ကတော့ 1.1.1.1 နဲ့ 9.9.9.9 က မဆိုးဘူးလို့ မြင်တာပဲ။

[stubby-git]: https://github.com/getdnsapi/stubby